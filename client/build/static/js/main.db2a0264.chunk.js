(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t){},135:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),o=a.n(c),s=a(138),i=(a(77),a(7)),l=a(8),u=a(10),m=a(9),p=a(13),d=a(23),h=a(69),b=a(70),f=a(3),v=a.n(f),j=a(6),g=a(12),E=a.n(g),O=a(19),k=Object(O.a)(),C={},y=function(){return function(){var e=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/auth/logout");case 3:t({type:"REMOVE_USER"}),k.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()};var N=a(1);function x(e){return{type:L,classroom:e}}var w=a(101).connect(window.location.origin);w.on("connect",(function(){console.log("Connected!","".concat(w.id))})),w.on("disconnect",(function(){console.log("Disconnected!")}));var T=w;function S(e){var t=e.allTopics,a=e.selectedTopic;return{type:M,allTopics:t,selectedTopic:a}}var I=function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.get("/api/topics/".concat(e));case 3:n=t.sent,r=n.data,a({type:R,allTopics:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};function D(e){return{type:_,project:e}}var A=function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/api/projects".concat(e));case 2:n=t.sent,r=n.data,a(D(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var P="GET_ALL_CLASSROOMS",L="GET_CLASSROOM",_="GET_PROJECT",M="SELECT_TOPIC",R="GET_ALL_TOPICS";T.on("topic",(function(e){G.dispatch(I(e))}));var F=Object(d.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return t.user;case"REMOVE_USER":return C;default:return e}},classroom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(N.a)(Object(N.a)({},e),{},{classrooms:t.classrooms});case L:return Object(N.a)(Object(N.a)({},e),{},{classroom:t.classroom});default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(N.a)(Object(N.a)({},e),{},{project:t.project});default:return e}},topic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(N.a)(Object(N.a)({},e),{},{allTopics:t.allTopics,selectedTopic:t.selectedTopic});case R:return Object(N.a)(Object(N.a)({},e),{},{allTopics:t.allTopics});default:return e}}}),V=Object(d.a)(h.a,Object(b.createLogger)({collapsed:!0})),G=Object(d.d)(F,V),B=G,U=function(){return r.a.createElement("div",{className:"popup-login"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Welcome to ezgp!"),r.a.createElement("p",null,"Create any group project, first-come-first-served."),r.a.createElement("br",null),r.a.createElement("a",{href:"/auth/google/home"},r.a.createElement("button",null,"Teacher Log In with Google")))))},W=a(34),z=function(e){var t=window.location.pathname,a=Object(n.useState)(),c=Object(W.a)(a,2),o=c[0],s=c[1];return r.a.createElement("div",{className:"popup-login"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"login"},r.a.createElement("p",null,"Sorry, the project code: ",r.a.createElement("span",{className:"login-code"},"".concat(t.replace("/","")))," was not found"),r.a.createElement("p",{htmlFor:"linkName"},"Try another code:"),r.a.createElement("div",{className:"login-code-input"},r.a.createElement("input",{type:"text",name:"linkName",onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{disabled:!o,onClick:function(){e.getProject("/".concat(o)),k.push("/".concat(o))}},"Go!")))))},J=function(){var e=window.location.pathname;return r.a.createElement("div",{className:"popup-login"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Welcome to ezgp!"),r.a.createElement("div",null,r.a.createElement("p",null,"Join group project code: "),r.a.createElement("p",{className:"login-code"},"".concat(e.replace("/","")))),r.a.createElement("br",null),r.a.createElement("a",{href:"/auth/google".concat(e)},r.a.createElement("button",null,"Student Log In with Google")))))},q=a(4),Y=a(2),$=a(11),Z=a(14),H=function(e){var t=e.text,a=e.logout;return r.a.createElement("div",{className:"title-bar"},r.a.createElement("h1",null,e.user?"Hi, ".concat(e.user.name,"! "):null,t),r.a.createElement("button",{onClick:a,className:"logout-button"},r.a.createElement($.a,{icon:Z.d}),"Logout"))},K=(a(135),a(17)),Q=a(24),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=e.project,c=r.name,o=r.linkName,s=r.topics,l=r.maxStudents,u=r.shortName,m=r.instructions,p=r.description;return n.initialState={showDetail:!1,editTopics:!1,isDirty:!1,isTopicsListDirty:!1,newTopicCount:0,errors:{}},n.state=Object(N.a)({name:c,maxStudents:l,linkName:o,shortName:u,instructions:m,description:p,topics:Object(Y.keyBy)(s,"id")},n.initialState),n.toggleViewDetail=n.toggleViewDetail.bind(Object(q.a)(n)),n.editTopics=n.editTopics.bind(Object(q.a)(n)),n.handleTopicChange=n.handleTopicChange.bind(Object(q.a)(n)),n.handleChange=n.handleChange.bind(Object(q.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(n)),n.addTopic=n.addTopic.bind(Object(q.a)(n)),n.deleteTopic=n.deleteTopic.bind(Object(q.a)(n)),n.deleteProject=n.deleteProject.bind(Object(q.a)(n)),n}return Object(l.a)(a,[{key:"toggleViewDetail",value:function(){this.setState(Object(N.a)(Object(N.a)({},this.state),{},{showDetail:!this.state.showDetail}))}},{key:"deleteProject",value:function(){var e=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.deleteProject(this.props.project.id);case 3:this.props.fetchClassroom();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=this.state.errors,a=e.target.value;switch(a=Object(Y.isString)(a)?a.trim():a,e.target.name){case"topic":return;case"maxStudents":var n,r=(null===(n=Object(Y.maxBy)(Object(Y.values)(this.state.topics),(function(e){return e.students.length})))||void 0===n?void 0:n.students.length)||1;t.maxStudents=a<r?"Min. ".concat(r," students"):a>8?"Max. 8 students":null;break;case"shortName":t.shortName=a.length<1?"Required":null;break;case"description":case"instructions":t[e.target.name]=a.length<4?"Min. 4 characters":null;break;case"linkName":if(a.length<4)t.linkName="Min. 4 characters";else{var c=new RegExp("^[a-zA-Z0-9]{4,50}$");t.linkName=c.test(a)?null:"Link names can only contain alphanumeric characters"}}this.setState(Object(N.a)(Object(N.a)({},this.state),{},Object(K.a)({isDirty:!0,errors:t},e.target.name,a)))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var a,n,r,c,o,s,i,l,u,m,p,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.name,r=a.linkName,c=a.topics,o=a.maxStudents,s=a.shortName,i=a.instructions,l=a.description,u=a.isDirty,m=a.isTopicsListDirty,p=a.errors,t.preventDefault(),Object(Y.isEmpty)(Object(Y.compact)(Object(Y.values)(p)))){e.next=4;break}return e.abrupt("return");case 4:if(d={id:this.props.id,name:n,linkName:r,maxStudents:o,shortName:s,instructions:i,description:l},m||u){e.next=8;break}return this.setState(this.initialState),e.abrupt("return");case 8:return m&&(d.topics=Object(Y.values)(c).map((function(e){return e.name}))),e.next=11,this.props.updateProject(d);case 11:this.props.fetchClassroom(),this.setState(this.initialState);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editTopics",value:function(){this.setState(Object(N.a)(Object(N.a)({},this.state),{},{editTopics:!this.state.editTopics}))}},{key:"addTopic",value:function(e){e.preventDefault();var t=this.state,a=t.topics,n=t.newTopicCount;this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:Object(N.a)(Object(N.a)({},a),{},Object(K.a)({},"new".concat(n),{id:"new".concat(n),name:""})),newTopicCount:n+1,isDirty:!0,isTopicsListDirty:!0}))}},{key:"handleTopicChange",value:function(e,t){var a,n=this.state.topics;n[t.id].name=null===(a=e.target.value)||void 0===a?void 0:a.trim(),this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:n,isDirty:!0,isTopicsListDirty:!0}))}},{key:"deleteTopic",value:function(e,t){e.preventDefault(),t.id.toString().startsWith("new")||this.props.deleteTopic(t.id),this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:Object(Y.omit)(this.state.topics,t.id)}))}},{key:"render",value:function(){var e;if(!this.props.project)return null;var t=this.state,a=t.name,n=t.linkName,c=t.maxStudents,o=t.shortName,s=t.instructions,i=t.description,l=t.showDetail,u=t.editTopics,m=t.topics,p=t.isDirty,d=t.errors,h=this.handleChange,b=this.handleTopicChange,f=this.handleSubmit,v=this.deleteTopic,j=this.addTopic,g=this.deleteProject,E=Object(Y.partition)(m,(function(e){return e.id.toString().startsWith("new")})),O=Object(W.a)(E,2),k=O[0],C=O[1],y=Object(Y.sortBy)(C,"name").concat(k),N=(null===(e=Object(Y.maxBy)(Object(Y.values)(this.state.topics),(function(e){var t;return null===(t=e.students)||void 0===t?void 0:t.length})))||void 0===e?void 0:e.students.length)||1;return l?r.a.createElement("div",{className:"project-swatch-detail"},r.a.createElement("h2",{className:"project-title"},a),r.a.createElement("div",{className:"project-detail"},r.a.createElement("div",{className:"topic-container"},r.a.createElement("div",{className:"topic-header"},r.a.createElement("h3",null,"Topic List"),r.a.createElement("button",{className:"edit-button",onClick:this.editTopics},r.a.createElement($.a,{icon:Q.a}),"Edit")),r.a.createElement("ol",null,null===y||void 0===y?void 0:y.map((function(e){return r.a.createElement("li",{key:e.id},u?r.a.createElement("div",{className:"topic-input"},r.a.createElement("input",{onChange:function(t){return b(t,e)},type:"text",name:"topic",defaultValue:e.name}),r.a.createElement($.a,{className:"delete-topic",icon:Q.b,onClick:function(t){return v(t,e)}})):e.name)}))),u?r.a.createElement("button",{className:"add-button",onClick:j},r.a.createElement($.a,{icon:Z.c}),"Add Another Topic"):r.a.createElement("h4",null,y.length," Topics")),r.a.createElement("div",{className:"form-fields"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{htmlFor:"linkName"},"Link name* ",r.a.createElement("a",{href:"/".concat(p?this.props.project.linkName:n),rel:"noopener noreferrer",target:"_blank"},r.a.createElement($.a,{icon:Z.b})),d.linkName?r.a.createElement("p",null,d.linkName):null),r.a.createElement("input",{onChange:h,type:"text",name:"linkName",defaultValue:n}),r.a.createElement("label",{htmlFor:"maxStudents"},"Max. students*",d.maxStudents?r.a.createElement("p",null,d.maxStudents):r.a.createElement("p",null," (per group)")),r.a.createElement("input",{onChange:h,type:"number",name:"maxStudents",defaultValue:c,placeholder:N,min:N,max:8}),r.a.createElement("label",{htmlFor:"shortName"},"Short name*",d.shortName?r.a.createElement("p",null,d.shortName):null),r.a.createElement("input",{onChange:h,type:"text",name:"shortName",defaultValue:o}),r.a.createElement("label",{htmlFor:"Description"},"Description*",d.description?r.a.createElement("p",null,d.description):null),r.a.createElement("textarea",{onChange:h,name:"description",defaultValue:i}),r.a.createElement("label",{htmlFor:"Instructions"},"Instructions*",d.instructions?r.a.createElement("p",null,d.instructions):null),r.a.createElement("textarea",{onChange:h,name:"instructions",defaultValue:s})),r.a.createElement("div",{className:"action-button"},r.a.createElement("button",{className:"delete-button",onClick:function(e){return g(e)}},r.a.createElement($.a,{icon:Q.b}),"Delete"),r.a.createElement("button",{className:"submit-button",title:Object(Y.compact)(Object(Y.values)(d)).length?"Resolve errors before saving":null,disabled:Object(Y.compact)(Object(Y.values)(d)).length,onClick:f},r.a.createElement($.a,{icon:Z.a}),p?"Save":"Done"))))):r.a.createElement("div",{className:"project-swatch",onClick:this.toggleViewDetail},r.a.createElement("h2",{className:"project-title"},a))}}]),a}(n.Component),ee=Object(p.b)(null,(function(e){return{getProject:function(t){return e(A(t))},updateProject:function(t){return e(function(e){return Object(j.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("/api/projects/update",e);case 2:case"end":return t.stop()}}),t)})))}(t))},deleteProject:function(t){return e((a=t,Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/projects/delete/".concat(a));case 2:case"end":return e.stop()}}),e)})))));var a},deleteTopic:function(t){return e(function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/api/projects/delete/topic/".concat(e));case 2:n=t.sent,r=n.data,a(D(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(X),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={name:null,topics:{},maxStudents:null,shortName:null,instructions:null,description:null,newTopicCount:null,errors:{}},n.handleSubmit=n.handleSubmit.bind(Object(q.a)(n)),n.deleteTopic=n.deleteTopic.bind(Object(q.a)(n)),n.handleTopicChange=n.handleTopicChange.bind(Object(q.a)(n)),n.handleChange=n.handleChange.bind(Object(q.a)(n)),n.addTopic=n.addTopic.bind(Object(q.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=this.state.errors,a=e.target.value;switch(a=Object(Y.isString)(a)?a.trim():a,e.target.name){case"topic":return;case"maxStudents":t.maxStudents=a<1?"Min. 1 student":a>8?"Max. 8 students":null;break;case"shortName":t.shortName=a.length<1?"Required":null;break;case"name":case"description":case"instructions":t[e.target.name]=a.length<4?"Min. 4 characters":null;break;case"linkName":if(a.length<4)t.linkName="Min. 4 characters";else{var n=new RegExp("^[a-zA-Z0-9]{4,50}$");t.linkName=n.test(a)?null:"Link names can only contain alphanumeric characters"}}this.setState(Object(N.a)(Object(N.a)({},this.state),{},Object(K.a)({errors:t},e.target.name,a)))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var a,n,r,c,o,s,i,l,u,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.name,r=a.linkName,c=a.topics,o=a.maxStudents,s=a.shortName,i=a.instructions,l=a.description,u=a.errors,t.preventDefault(),Object(Y.isEmpty)(Object(Y.compact)(Object(Y.values)(u)))){e.next=4;break}return e.abrupt("return");case 4:return m={id:this.props.id,classroomId:this.props.classroomId,name:n,linkName:r,maxStudents:o,shortName:s,instructions:i,description:l},Object(Y.isEmpty)(c)||(m.topics=Object(Y.compact)(Object(Y.map)(Object(Y.values)(c),"name"))),e.next=8,this.props.createProject(m);case 8:this.props.fetchClassroom(),this.props.setIsAdding(!1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleTopicChange",value:function(e,t){var a,n=this.state.topics;n[t].name=null===(a=e.target.value)||void 0===a?void 0:a.trim(),this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:n}))}},{key:"addTopic",value:function(e){e.preventDefault();var t=this.state,a=t.topics,n=t.newTopicCount;this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:Object(N.a)(Object(N.a)({},a),{},Object(K.a)({},"new".concat(n),{id:"new".concat(n),name:""})),newTopicCount:n+1}))}},{key:"deleteTopic",value:function(e,t){e.preventDefault(),this.setState(Object(N.a)(Object(N.a)({},this.state),{},{topics:Object(Y.omit)(this.state.topics,t)}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.topics,c=a.errors,o=a.name,s=a.shortName,i=a.maxStudents,l=a.description,u=a.instructions,m=!o||!s||!i||!l||!u,p=this.handleChange,d=this.handleTopicChange,h=this.handleSubmit,b=this.deleteTopic,f=this.addTopic;return r.a.createElement("div",{className:"project-swatch-detail__create"},r.a.createElement("div",{className:"project-detail"},r.a.createElement("div",{className:"topic-container"},r.a.createElement("div",{className:"topic-header"},r.a.createElement("h3",null,"Topic List")),r.a.createElement("ol",null,null===(e=Object(Y.values)(n))||void 0===e?void 0:e.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"topic-input"},r.a.createElement("input",{onChange:function(t){return d(t,e.id)},type:"text",name:"topic"}),r.a.createElement($.a,{className:"delete-topic",icon:Q.b,onClick:function(t){return b(t,e.id)}})))}))),r.a.createElement("button",{className:"add-button",onClick:f},r.a.createElement($.a,{icon:Z.c}),"Add Another Topic")),r.a.createElement("div",{className:"form-fields"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{htmlFor:"name"},"Project name*",c.name?r.a.createElement("p",null,c.name):null),r.a.createElement("input",{onChange:p,type:"text",name:"name"}),r.a.createElement("label",{htmlFor:"maxStudents"},"Max. students*",c.maxStudents?r.a.createElement("p",null,c.maxStudents):r.a.createElement("p",null," (per group)")),r.a.createElement("input",{onChange:p,type:"number",name:"maxStudents",min:1,max:8,placeholder:"e.g. 1"}),r.a.createElement("label",{htmlFor:"shortName"},"Short name*",c.shortName?r.a.createElement("p",null,c.shortName):null),r.a.createElement("input",{onChange:p,type:"text",name:"shortName"}),r.a.createElement("label",{htmlFor:"Description"},"Description*",c.description?r.a.createElement("p",null,c.description):null),r.a.createElement("textarea",{onChange:p,name:"description"}),r.a.createElement("label",{htmlFor:"Instructions"},"Instructions*",c.instructions?r.a.createElement("p",null,c.instructions):null),r.a.createElement("textarea",{onChange:p,name:"instructions"})),r.a.createElement("div",{className:"action-button"},r.a.createElement("button",{onClick:function(){return t.props.setIsAdding(!1)}},"Cancel"),r.a.createElement("button",{className:"submit-button",title:Object(Y.compact)(Object(Y.values)(c)).length?"Resolve errors before saving":null,disabled:Object(Y.compact)(Object(Y.values)(c)).length||m,onClick:h},r.a.createElement($.a,{icon:Z.a}),"Save")))))}}]),a}(n.Component),ae=Object(p.b)(null,(function(e){return{createProject:function(t){return e(function(e){return Object(j.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("/api/projects/create",e);case 2:case"end":return t.stop()}}),t)})))}(t))}}}))(te),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isAdding:!1},n.setIsAdding=n.setIsAdding.bind(Object(q.a)(n)),n.fetchClassroom=n.fetchClassroom.bind(Object(q.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchClassroom()}},{key:"fetchClassroom",value:function(){this.props.getClassroom(this.props.id)}},{key:"setIsAdding",value:function(e){this.setState({isAdding:e})}},{key:"render",value:function(){var e=this,t=this.props.classroom;if(!t)return null;var a=t.projects;return r.a.createElement("div",{className:"Admin"},r.a.createElement("div",{className:"projects-container"},(null===a||void 0===a?void 0:a.length)?a.map((function(t){var a=t.id;return r.a.createElement(ee,{key:a,id:a,project:t,fetchClassroom:e.fetchClassroom})})):null,this.state.isAdding?r.a.createElement(ae,{key:t.id,classroomId:t.id,setIsAdding:this.setIsAdding,fetchClassroom:this.fetchClassroom}):r.a.createElement("button",{className:"new-project-button",onClick:function(){return e.setIsAdding(!0)}},r.a.createElement($.a,{icon:Z.c}),"Create a new project")))}}]),a}(n.Component),re=Object(p.b)((function(e){return{classroom:e.classroom.classroom}}),(function(e){return{getClassroom:function(t){return e(function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/api/classrooms/".concat(e));case 2:n=t.sent,r=n.data,a(x(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},logout:function(){return e(y())}}}))(ne),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={name:null,description:null,errors:{}},n.handleSubmit=n.handleSubmit.bind(Object(q.a)(n)),n.handleChange=n.handleChange.bind(Object(q.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=this.state.errors,a=e.target.value;switch(a=Object(Y.isString)(a)?a.trim():a,e.target.name){case"name":case"description":t[e.target.name]=e.target.value.length<4?"Min. 4 characters":null}this.setState(Object(N.a)(Object(N.a)({},this.state),{},Object(K.a)({errors:t},e.target.name,a)))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var a,n,r,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.name,r=a.description,c=a.errors,t.preventDefault(),Object(Y.isEmpty)(Object(Y.compact)(Object(Y.values)(c)))){e.next=4;break}return e.abrupt("return");case 4:return o={name:n,description:r},e.next=7,this.props.createClassroom(o);case 7:this.props.getClassrooms(),this.props.setClassroom(this.props.classroom),this.props.setIsAdding(!1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.errors,a=this.handleChange,n=this.handleSubmit;return r.a.createElement("div",{className:"create-classroom-form"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"name"},"Name*",t.name?r.a.createElement("p",null,t.name):null),r.a.createElement("input",{onChange:a,type:"text",name:"name"}),r.a.createElement("label",{htmlFor:"Description"},"Description*",t.description?r.a.createElement("p",null,t.description):null),r.a.createElement("textarea",{onChange:a,name:"description",placeholder:"e.g. Period 1, 8:30am"})),r.a.createElement("div",{className:"action-button"},r.a.createElement("button",{onClick:function(){return e.props.setIsAdding(!1)}},"Cancel"),r.a.createElement("button",{className:"submit-button",title:Object(Y.compact)(Object(Y.values)(t)).length?"Resolve errors before saving":null,disabled:Object(Y.compact)(Object(Y.values)(t)).length,onClick:n},r.a.createElement($.a,{icon:Z.a}),"Save")))}}]),a}(n.Component),oe=Object(p.b)((function(e){return{classroom:e.classroom.classroom}}),(function(e){return{createClassroom:function(t){return e(function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("/api/classrooms/create",e);case 2:n=t.sent,r=n.data,a(x(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(ce),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={classroomId:null,classroomName:null,isAdding:!1},e.setClassroom=e.setClassroom.bind(Object(q.a)(e)),e.setIsAdding=e.setIsAdding.bind(Object(q.a)(e)),e.getClassrooms=e.getClassrooms.bind(Object(q.a)(e)),e}return Object(l.a)(a,[{key:"setClassroom",value:function(e){var t=e.id,a=e.name;this.setState(Object(N.a)(Object(N.a)({},this.state),{},{classroomId:t,classroomName:a}))}},{key:"setIsAdding",value:function(e){this.setState({isAdding:e})}},{key:"getClassrooms",value:function(){this.props.getClassrooms()}},{key:"componentDidMount",value:function(){this.getClassrooms()}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.logout,c=t.classrooms,o=this.state,s=o.classroomId,i=o.classroomName;return r.a.createElement("div",{className:"Admin"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("h3",null,a.name,"'s Classes"),(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.map((function(t){var a=t.id,n=t.name,c=t.description;return r.a.createElement("div",{className:s===a?"classroom--selected":"classroom",key:a,onClick:function(){return e.setClassroom({id:a,name:n})}},r.a.createElement("h2",{className:"classroom__title"},n),r.a.createElement("p",{className:"classroom__description"},c))})):"Loading Classroom",this.state.isAdding?r.a.createElement(oe,{setIsAdding:this.setIsAdding,getClassrooms:this.getClassrooms,setClassroom:this.setClassroom}):r.a.createElement("button",{className:"new-class-button",onClick:function(){return e.setIsAdding(!0)}},r.a.createElement($.a,{icon:Z.c}),"Create a new classroom")),r.a.createElement("div",{className:"main"},r.a.createElement(H,{logout:n,text:"".concat(null!==i&&void 0!==i?i:"Manage Classrooms")}),s?r.a.createElement(re,{key:s,id:s}):null))}}]),a}(n.Component),ie=Object(p.b)((function(e){return{user:e.user,classrooms:Object(Y.sortBy)(e.classroom.classrooms,"name")}}),(function(e){return{getClassrooms:function(){return e(function(){var e=Object(j.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/classrooms/all/mine");case 3:a=e.sent,n=a.data,t({type:P,classrooms:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},logout:function(){return e(y())}}}))(se),le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.closePopup,a=e.project;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"message"},r.a.createElement("h3",null,a.name),r.a.createElement("p",null,a.description),r.a.createElement("p",null,"Instructions: ",a.instructions),r.a.createElement("button",{onClick:t},"OK!"))))}}]),a}(r.a.Component),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){for(var e=this,t=this.props,a=t.maxStudents,n=t.name,c=t.id,o=t.students,s=o.length===a,i=[],l=0;l<3;l++){var u=Math.floor(256*Math.random());u-i[l]<10&&(u+=20),i.push(u)}return r.a.createElement("div",{className:s?"topic-swatch__selected":"topic-swatch",style:{backgroundColor:"rgb(".concat(i,")")},onClick:function(){return e.props.selectTopic({id:c,name:n,isFull:s})}},r.a.createElement("h2",null,n),r.a.createElement("div",{className:"group"},s?o.map((function(e,t){return r.a.createElement("p",{key:t},e.name)})):null))}}]),a}(n.Component),me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={showPopup:!0},e.handleSelect=e.handleSelect.bind(Object(q.a)(e)),e.closePopup=e.closePopup.bind(Object(q.a)(e)),e.logout=e.logout.bind(Object(q.a)(e)),e}return Object(l.a)(a,[{key:"closePopup",value:function(){this.setState({showPopup:!1})}},{key:"logout",value:function(){this.props.logout()}},{key:"handleSelect",value:function(e){var t=e.id,a=e.name,n=e.isFull,r=this.props,c=r.user,o=r.selectedTopic,s=r.allTopics,i=r.project;o||s.find((function(e){return e.students.find((function(e){return e.googleId===c.googleId}))}))?alert("You already chose a topic"):n?alert("The topic is already taken! Choose another!"):(this.props.chooseTopic({id:t,student:c}),alert("You chose well! Your topic for ".concat(i.name," is: ").concat(a)))}},{key:"componentDidMount",value:function(){this.props.getTopics(this.props.project.id)}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.allTopics,c=a.project,o=a.user,s=a.logout,i=Math.ceil(Math.sqrt(n.length));return r.a.createElement("div",{className:"App"},this.state.showPopup?r.a.createElement(le,{project:c,closePopup:this.closePopup}):null,r.a.createElement(H,{user:o,logout:s,text:"Choose your ".concat(null!==(e=c.shortName)&&void 0!==e?e:c.name," topic")}),r.a.createElement("div",{className:"app-container-".concat(i>5?5:i)},(null===n||void 0===n?void 0:n.length)?null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(ue,{key:e.id,id:e.id,name:e.name,students:e.students,maxStudents:c.maxStudents,selectTopic:t.handleSelect})})):"Loading Topic Name"))}}]),a}(n.Component),pe=Object(p.b)((function(e){return{allTopics:Object(Y.sortBy)(e.topic.allTopics,"name"),user:e.user,selectedTopic:e.topic.selectedTopic,project:e.project.project}}),(function(e){return{getTopics:function(t){return e(I(t))},chooseTopic:function(t){return e(function(e){return function(){var t=Object(j.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("/api/topics/select",e);case 2:n=t.sent,r=n.data,a(S(r)),T.emit("select-topic",{projectId:r.selectedTopic.projectId});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},logout:function(){return e(y())}}}))(me),de=function(){return r.a.createElement("div",{className:"popup-login"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"login"},r.a.createElement("h2",null,"Sorry, classroom creation page coming soon!"))))},he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getUser().then((function(){if(e.props.isLoggedIn){var t=e.props.location.pathname;if(!t||["/","/home"].includes(t)||t.split("/").length>2)return;e.props.getProject(e.props.location.pathname)}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=t.project;return r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/home",component:a?ie:U}),a&&r.a.createElement(s.a,{path:"/home/classroom/:id",component:ie}),a&&r.a.createElement(s.a,{exact:!0,path:"/create/classroom",component:de}),a?r.a.createElement(s.a,{path:"/:linkName",render:function(t){return n?r.a.createElement(pe,t):r.a.createElement(z,{getProject:e.props.getProject})}}):r.a.createElement(s.a,{path:"/:linkName",component:J}),r.a.createElement(s.a,{exact:!0,path:"/",component:a?ie:U}))}}]),a}(n.Component),be=Object(s.d)(Object(p.b)((function(e){var t;return{isLoggedIn:!!(null===(t=e.user)||void 0===t?void 0:t.googleId),user:e.user,project:e.project.project}}),(function(e){return{getUser:function(){return e(function(){var e=Object(j.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/auth/me");case 3:a=e.sent,t({type:"GET_USER",user:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},getProject:function(t){return e(A(t))}}}))(he)),fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(p.a,{store:B},r.a.createElement(s.b,{history:k},r.a.createElement(fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,a){e.exports=a(137)},77:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.db2a0264.chunk.js.map