(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(18),c=n.n(r),s=(n(60),n(7)),i=n(8),u=n(11),l=n(9),p=n(13),h=n(12),m=n(10),d=n(14);var f=n(5),j=n.n(f),v=n(19),g=n.n(v),b=n(52),y=n.n(b)()(window.location.origin);y.on("connect",(function(){console.log("Connected!")}));var w=y;function E(e){return{type:C,project:e}}var O=function(){return function(e){var t,n;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,j.a.awrap(g.a.get("/api/projects"));case 3:t=o.sent,n=t.data,e({type:x,projects:n}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.error(o.t0);case 11:case"end":return o.stop()}}),null,null,[[0,8]])}};var P=n(53),S=n(54),k="UPDATE_NAME",C="SET_PROJECT",T="GET_PROJECT",x="GET_ALL_PROJECTS";w.on("select-project",(function(){_.dispatch(O())}));var N=Object(d.c)({name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"student",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.name;default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case T:return t.project;case x:return t.projects;default:return e}}}),L=Object(d.a)(P.a,Object(S.createLogger)({collapsed:!0})),_=Object(d.d)(N,L),A=_;var I=Object(m.b)(null,(function(e){return{handleChange:function(t){e(function(e){var t={type:k,name:e};return sessionStorage.setItem("name",e),t}(t.target.value))}}}))((function(e){var t=e.handleChange;return a.a.createElement("form",{className:"form-inline"},a.a.createElement("label",{htmlFor:"name"},"Enter your name:"),a.a.createElement("input",{type:"text",name:"name",placeholder:"First and Last Name",className:"form-control",onChange:t}),a.a.createElement("button",{onClick:e.closePopup},"Go!"),a.a.createElement("p",null,'Instructions: After you click "Go!", Choose your project topic before someone else does! First 4 to select a country will form the group. Think carefully before selecting. When you click the topic, it will be your final choice!'))})),J=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"popup"},a.a.createElement("div",{className:"popup_inner"},a.a.createElement(I,{closePopup:this.props.closePopup})))}}]),t}(a.a.Component),F=(n(113),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.numStudents,o=t.name,r=t.id,c=t.users,s=[],i=0;i<3;i++){var u=Math.floor(256*Math.random());s.push(u)}return a.a.createElement("div",{class:"project-swatch",style:{backgroundColor:"rgb(".concat(s,")")},onClick:this.props.isSelected?null:function(){return e.props.selectProject(r,n,o)}},a.a.createElement("h2",null,o),a.a.createElement("div",{class:"group"},4===n?c.map((function(e){return a.a.createElement("p",null,e.name)})):null))}}]),t}(o.Component)),G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={isSelected:!1,showPopup:!0,name:"student"},e.togglePopup=e.togglePopup.bind(Object(p.a)(e)),e.handleSelect=e.handleSelect.bind(Object(p.a)(e)),e.connectToServer=e.connectToServer.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"handleSelect",value:function(e,t,n){t<4?(this.props.chooseProject({id:e,name:this.state.name}),w.emit("select-project",{name:this.state.name,project:n}),alert("You chose well! Let's see who else joins your group on ".concat(n)),this.setState({isSelected:!0})):alert("The group is now full! Choose another!")}},{key:"componentDidUpdate",value:function(e,t){t.name!==sessionStorage.getItem("name")&&this.setState({name:sessionStorage.getItem("name")})}},{key:"connectToServer",value:function(){fetch("/ping")}},{key:"componentDidMount",value:function(){this.connectToServer(),this.props.getProjects(),w.on("select-project",(function(e){console.log("".concat(e.project," was chosen by ").concat(e.name))}))}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,this.state.showPopup?a.a.createElement(J,{closePopup:this.togglePopup}):a.a.createElement("h1",null,"Hi, ",this.state.name,"! Choose your topic quickly!"),a.a.createElement("div",{className:"App"},this.props.projects.length?this.props.projects.map((function(t){return a.a.createElement(F,{key:t.id,id:t.id,student:e.state.name,users:t.users,name:t.name,numStudents:t.numStudents,isSelected:e.state.isSelected,selectProject:e.handleSelect})})):"Loading Project Name"))}}]),t}(o.Component),M=Object(m.b)((function(e){return{name:e.name,projects:e.project}}),(function(e){return{getProjects:function(){return e(O())},getProjectUsers:function(t){return e((function(e){var t,n;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,j.a.awrap(g.a.get("/api"));case 3:t=o.sent,n=t.data,e({type:T,project:n}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.error(o.t0);case 11:case"end":return o.stop()}}),null,null,[[0,8]])}))},chooseProject:function(t){return e(function(e){return function(t){var n,o;return j.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.awrap(g.a.post("/api/projects/select",e));case 2:n=a.sent,o=n.data,t(E(o)),w.emit("select-project",o);case 6:case"end":return a.stop()}}))}}(t))}}}))(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(m.a,{store:A},a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,n){e.exports=n(114)},60:function(e,t,n){}},[[55,1,2]]]);
//# sourceMappingURL=main.f1604ee1.chunk.js.map